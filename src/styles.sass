@use "sass:color"

// Core Values
$gap: 1rem
$padding: 1.5rem
$radius: 0.5rem
$font: 0.875rem
$spacing: 2rem
$min-height: 2.5rem

// Breakpoints
$mobile: 768px
$tablet: 1024px

// Colors
$base: #5533ff
$primary: $base
$secondary: color.adjust($base, $hue: 20deg)
$success: color.adjust($base, $hue: 140deg)
$warning: color.adjust($base, $hue: 45deg)
$error: color.adjust($base, $hue: 348deg)

// CSS Variables
:root
  --bg: #{color.adjust($base, $hue: 45deg, $saturation: -60%, $lightness: 45%, $alpha: 0.2)}
  --bg-muted: #{color.adjust($base, $hue: 45deg, $saturation: -40%, $lightness: 35%)}
  --fg: #{color.adjust($base, $lightness: -40%)}
  --fg-muted: #{color.adjust($base, $lightness: -20%)}
  --primary: #{$primary}
  --secondary: #{$secondary}
  --success: #{$success}
  --warning: #{$warning}
  --error: #{$error}
  --radius: #{$radius}
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1)
  --border-muted: #{color.adjust($base, $hue: 45deg, $saturation: -50%, $lightness: 40%, $alpha: 0.4)}

.dark
  --bg: #{color.adjust($base, $hue: 25deg, $saturation: -50%, $lightness: -35%, $alpha: -0.0008)}
  --bg-muted: #{color.adjust($base, $hue: 25deg, $saturation: -30%, $lightness: -25%)}
  --fg: #{color.adjust($base, $lightness: 40%)}
  --fg-muted: #{color.adjust($base, $lightness: 20%)}
  --primary: #{color.adjust($primary, $lightness: 15%)}
  --secondary: #{color.adjust($secondary, $lightness: 15%)}
  --success: #{color.adjust($success, $lightness: 15%)}
  --warning: #{color.adjust($warning, $lightness: 15%)}
  --error: #{color.adjust($error, $lightness: 15%)}
  --border-muted: #{color.adjust($base, $hue: 25deg, $saturation: -40%, $lightness: -30%, $alpha: 0.4)}

// Reset & Base
*
  box-sizing: border-box
  margin: 0
  padding: 0

// Remove default borders from all form elements and interactive components
button, input, select, textarea, fieldset, legend, optgroup, option
  border: none
  outline: none
  background: none
  font-family: inherit
  font-size: inherit
  color: inherit

// Remove default button styling
button
  cursor: pointer
  padding: 0
  margin: 0
  border-radius: 0
  background: transparent
  border: none
  font: inherit
  color: inherit
  text-decoration: none
  display: inline-block
  line-height: 1
  text-align: center
  vertical-align: middle
  user-select: none
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

// Remove default input styling
input, select, textarea
  border: none
  outline: none
  background: transparent
  font: inherit
  color: inherit
  padding: 0
  margin: 0
  border-radius: 0
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

// Remove default select styling
select
  background-image: none
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

// Remove default fieldset styling
fieldset
  border: none
  padding: 0
  margin: 0
  min-width: 0

// Remove default legend styling
legend
  border: none
  padding: 0
  margin: 0

// Remove default list styling
ul, ol
  list-style: none
  padding: 0
  margin: 0

// Remove default link styling
a
  color: inherit
  text-decoration: none

// Remove default table styling
table
  border-collapse: collapse
  border-spacing: 0

// Remove default image styling
img
  max-width: 100%
  height: auto
  border: none
  vertical-align: middle

html, body
  overflow-x: hidden
  max-width: 100vw

body
  font-family: 'Baloo 2', sans-serif
  line-height: 1.6
  background: var(--bg)
  color: var(--fg)
  min-height: 100vh
  max-width: 1200px
  margin: 0 auto
  padding: 0 $padding
  padding-top: 3rem
  overflow-x: hidden

  @media (max-width: $mobile)
    padding: 0 1rem
    padding-top: 2rem

// Core Layout
%flex
  display: flex
  align-items: center

%flex-between
  @extend %flex
  justify-content: space-between

%flex-wrap
  @extend %flex
  flex-wrap: wrap
  gap: $gap

%grid
  display: grid
  gap: $gap

%grid-2
  @extend %grid
  grid-template-columns: 1fr 1fr

%grid-3
  @extend %grid
  grid-template-columns: repeat(3, 1fr)

%grid-4
  @extend %grid
  grid-template-columns: repeat(4, 1fr)

// Responsive Grid Layouts
%grid-responsive
  @extend %grid
  grid-template-columns: 1fr

  @media (min-width: $mobile)
    grid-template-columns: repeat(2, 1fr)

  @media (min-width: $tablet)
    grid-template-columns: repeat(4, 1fr)

%grid-responsive-2
  @extend %grid
  grid-template-columns: 1fr

  @media (min-width: $mobile)
    grid-template-columns: repeat(2, 1fr)

%grid-responsive-3
  @extend %grid
  grid-template-columns: 1fr

  @media (min-width: $mobile)
    grid-template-columns: repeat(2, 1fr)

  @media (min-width: $tablet)
    grid-template-columns: repeat(3, 1fr)

// Form Layouts
%form-horizontal
  @extend %grid-responsive
  align-items: end

%form-stacked
  @extend %grid
  grid-template-columns: 1fr

// Spacing
%spacing
  > * + *
    margin-top: $spacing

// Transitions & Effects
%transition
  transition: all 0.2s ease

%glass
  backdrop-filter: blur(10px)

%focus
  &:focus
    outline: none
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 40%, transparent), 0 4px 20px color-mix(in oklab, var(--primary) 30%, transparent)

// Colors & Backgrounds
%bg-subtle
  background: color-mix(in oklab, var(--bg-muted) 30%, transparent)

%bg-muted
  background: color-mix(in oklab, var(--bg-muted) 40%, transparent)

%bg-primary
  background: color-mix(in oklab, var(--primary) 90%, transparent)

%bg-error
  background: color-mix(in oklab, var(--error) 90%, transparent)

// Border placeholders removed - using shadows instead

// Hover Effects
%hover-lift
  &:hover
    transform: translateY(-2px)
    box-shadow: 0 8px 32px color-mix(in oklab, var(--primary) 20%, transparent)

%hover-opacity
  &:hover
    opacity: 1

%hover-scale
  &:hover
    transform: scale(1.05)

// Common Patterns
%circular
  width: $min-height
  height: $min-height
  padding: 0
  border-radius: 50%

%opacity-muted
  opacity: 0.8

%opacity-subtle
  opacity: 0.6

%shadow-card
  border-radius: 1.5rem
  box-shadow: 0 8px 32px color-mix(in oklab, var(--bg-muted) 40%, transparent)

// No longer needed - borders are reset globally

%interactive
  @extend %transition, %shadow-card
  &:hover
    @extend %hover-lift

%form-field
  padding: 1rem 1.25rem
  background: color-mix(in oklab, var(--secondary) 12%, transparent)
  @extend %glass, %transition, %focus
  border-radius: 1rem
  color: var(--fg)
  font-size: $font
  min-height: $min-height
  width: 100%
  max-width: 100%
  box-shadow: 0 2px 8px color-mix(in oklab, var(--secondary) 25%, transparent)

  &::placeholder
    color: var(--fg-muted)
    opacity: 0.7

  &:hover
    background: color-mix(in oklab, var(--secondary) 20%, transparent)
    box-shadow: 0 4px 16px color-mix(in oklab, var(--secondary) 35%, transparent)
    transform: translateY(-2px)

  &:focus
    background: color-mix(in oklab, var(--primary) 25%, transparent)
    box-shadow: 0 6px 24px color-mix(in oklab, var(--primary) 50%, transparent)
    transform: translateY(-3px)
    outline: none

  &:active
    background: color-mix(in oklab, var(--primary) 35%, transparent)
    box-shadow: 0 3px 12px color-mix(in oklab, var(--primary) 40%, transparent)
    transform: translateY(-1px)

  &.error
    background: color-mix(in oklab, var(--error) 25%, transparent)
    box-shadow: 0 2px 8px color-mix(in oklab, var(--error) 40%, transparent)

    &:hover
      background: color-mix(in oklab, var(--error) 35%, transparent)
      box-shadow: 0 4px 16px color-mix(in oklab, var(--error) 50%, transparent)

    &:focus
      background: color-mix(in oklab, var(--error) 40%, transparent)
      box-shadow: 0 6px 24px color-mix(in oklab, var(--error) 60%, transparent)

%font-weight-bold
  font-weight: 600

%font-weight-medium
  font-weight: 500

%margin-bottom
  margin-bottom: 1rem

%margin-top
  margin-top: $spacing

// Components
%card
  background: color-mix(in oklab, var(--primary) 8%, transparent)
  @extend %glass, %transition
  padding: 2.5rem
  overflow: hidden
  border-radius: 1.5rem
  box-shadow: 0 8px 32px color-mix(in oklab, var(--primary) 15%, transparent)

  @media (max-width: $mobile)
    padding: 1.5rem
    border-radius: 1rem

%button-base
  @extend %flex, %transition, %focus
  gap: 0.5rem
  padding: 0.75rem 1rem
  border-radius: var(--radius)
  font-size: $font
  @extend %font-weight-medium
  min-height: $min-height
  white-space: nowrap

  @media (max-width: $mobile)
    padding: 0.5rem 0.75rem
    font-size: 0.75rem
    gap: 0.25rem

%button-primary
  @extend %button-base, %bg-primary, %glass
  color: white
  background: color-mix(in oklab, var(--secondary) 85%, transparent)
  box-shadow: 0 2px 8px color-mix(in oklab, var(--primary) 30%, transparent)

  &:hover
    background: color-mix(in oklab, var(--primary) 95%, transparent)
    transform: translateY(-2px)
    box-shadow: 0 6px 20px color-mix(in oklab, var(--primary) 50%, transparent)

  &:active
    background: color-mix(in oklab, var(--primary) 100%, transparent)
    transform: translateY(-1px)
    box-shadow: 0 3px 12px color-mix(in oklab, var(--primary) 40%, transparent)

%button-secondary
  @extend %button-base, %bg-subtle, %glass
  color: var(--fg)
  background: color-mix(in oklab, var(--secondary) 15%, transparent)
  box-shadow: 0 2px 8px color-mix(in oklab, var(--secondary) 30%, transparent)

  &:hover
    background: color-mix(in oklab, var(--secondary) 25%, transparent)
    transform: translateY(-2px)
    box-shadow: 0 6px 20px color-mix(in oklab, var(--secondary) 45%, transparent)

  &:active
    background: color-mix(in oklab, var(--secondary) 35%, transparent)
    transform: translateY(-1px)
    box-shadow: 0 3px 12px color-mix(in oklab, var(--secondary) 40%, transparent)

%button-danger
  @extend %button-base, %bg-error, %glass
  color: white
  background: color-mix(in oklab, var(--error) 85%, transparent)
  box-shadow: 0 2px 8px color-mix(in oklab, var(--error) 30%, transparent)

  &:hover
    background: color-mix(in oklab, var(--error) 95%, transparent)
    transform: translateY(-2px)
    box-shadow: 0 6px 20px color-mix(in oklab, var(--error) 50%, transparent)

  &:active
    background: color-mix(in oklab, var(--error) 100%, transparent)
    transform: translateY(-1px)
    box-shadow: 0 3px 12px color-mix(in oklab, var(--error) 40%, transparent)

%button-circular
  @extend %button-secondary, %circular

%button-small
  @extend %button-secondary
  padding: 0.5rem
  font-size: 0.75rem

%input-base
  @extend %form-field

// Typography
%heading
  font-family: 'Bungee', monospace
  line-height: 1.2
  @extend %font-weight-bold

%heading-primary
  @extend %heading
  color: var(--primary)

%text-muted
  color: var(--fg-muted)

%logo-text
  font-family: 'Bungee', monospace
  color: var(--primary)

%label-text
  @extend %flex
  gap: 0.5rem
  @extend %font-weight-bold
  font-size: $font
  color: var(--fg)
  margin-bottom: 0.5rem

%heading-size-large
  font-size: 2rem

  @media (max-width: $mobile)
    font-size: 1.5rem

%heading-size-medium
  font-size: 1.5rem

  @media (max-width: $mobile)
    font-size: 1.25rem

%heading-size-small
  font-size: 1.25rem

  @media (max-width: $mobile)
    font-size: 1.1rem

%heading-size-xs
  font-size: 1rem

// Layout Components
.header-fixed
  position: fixed
  top: 0
  left: 0
  right: 0
  z-index: 1000
  background: var(--bg)
  border-bottom: 1px solid var(--bg-muted)
  box-shadow: var(--shadow)
  overflow: hidden

  .header-content
    @extend %flex-between
    max-width: 1200px
    margin: 0 auto
    padding: 0 $padding
    height: 4rem
    overflow: hidden
    gap: 1rem

    @media (max-width: $mobile)
      padding: 0 1rem
      height: 3.5rem
      gap: 0.5rem

    .logo-link
      @extend %flex
      gap: 0.5rem
      text-decoration: none
      color: var(--fg)
      @extend %font-weight-bold
      font-size: 1.25rem
      flex-shrink: 0
      &:hover
        @extend %hover-lift

      @media (max-width: $mobile)
        font-size: 1rem
        gap: 0.25rem

      img
        @extend %interactive

      .logo-text
        @extend %logo-text

    .main-nav
      @extend %flex
      gap: 0.5rem
      overflow: hidden
      flex-shrink: 0

      @media (max-width: $mobile)
        gap: 0.25rem

      button
        @extend %button-secondary
        flex-shrink: 0
        white-space: nowrap
        min-width: fit-content

        @media (max-width: $mobile)
          padding: 0.4rem 0.6rem
          font-size: 0.7rem

    .theme-toggle
      @extend %button-circular
      &:hover
        transform: translateY(-2px) rotate(15deg)

      @media (max-width: $mobile)
        width: 2rem
        height: 2rem
        padding: 0

main
  @extend %spacing
  min-height: 60vh
  @extend %margin-top
  overflow: hidden

footer
  @extend %spacing
  @extend %margin-top
  padding: 3rem 0
  @extend %bg-subtle, %glass
  @extend %grid-responsive-3
  overflow: hidden

  @media (max-width: $mobile)
    padding: 2rem 0

  > img
    grid-column: 1 / -1
    justify-self: center
    @extend %interactive

  > p:first-of-type
    grid-column: 1 / -1
    @extend %text-muted
    text-align: center
    margin-bottom: 0
    @extend %opacity-muted

  > section
    @extend %spacing

    h3
      @extend %heading-primary
      @extend %margin-bottom
      @extend %heading-size-xs
      @extend %opacity-muted

    ul
      list-style: none
      @extend %spacing

      button
        @extend %button-secondary
        width: 100%
        justify-content: flex-start
        background: transparent
        border: none
        padding: 0.5rem
        text-align: left
        @extend %opacity-muted
        &:hover
          color: var(--primary)
          @extend %hover-opacity
          transform: translateX(4px)

  > p:last-of-type
    grid-column: 1 / -1
    @extend %text-muted
    text-align: center
    font-size: $font
    margin-top: 0
    @extend %opacity-subtle

  > nav
    grid-column: 1 / -1
    @extend %flex
    justify-content: center
    gap: 0.5rem
    margin-top: 0

    button
      @extend %button-circular, %opacity-muted
      &:hover
        @extend %hover-opacity, %hover-lift

// Components
section
  @extend %card, %spacing
  margin-bottom: 2rem

h1, h2, h3, h4, h5, h6
  @extend %heading

h1
  @extend %heading-size-large
  @extend %heading-primary

h2
  @extend %heading-size-medium
  @extend %heading-primary
  @extend %margin-bottom

h3
  @extend %heading-size-small
  @extend %heading-primary
  @extend %margin-bottom

h4
  @extend %heading-size-xs
  color: var(--fg)
  margin: 1.5rem 0 0.5rem

p
  @extend %text-muted
  margin-bottom: 1.5rem

// Form Elements
form
  @extend %form-stacked

fieldset
  // Borders already reset globally

label
  @extend %label-text

input, select, textarea
  @extend %input-base

select
  background-image: none
  cursor: pointer

  &:hover
    background: color-mix(in oklab, var(--secondary) 20%, transparent)

  &:focus
    background: color-mix(in oklab, var(--primary) 25%, transparent)

input[type="file"]
  padding: 0.5rem
  cursor: pointer

  &:hover
    background: color-mix(in oklab, var(--secondary) 20%, transparent)
    box-shadow: 0 4px 16px color-mix(in oklab, var(--secondary) 35%, transparent)

  &:focus
    background: color-mix(in oklab, var(--primary) 25%, transparent)
    box-shadow: 0 6px 24px color-mix(in oklab, var(--primary) 50%, transparent)

// Form Groups
.form-group
  @extend %grid
  grid-template-columns: 1fr
  align-items: start
  gap: 0.75rem
  margin-bottom: 1.5rem

  @media (min-width: $mobile)
    grid-template-columns: 200px 1fr
    gap: 1.5rem

  label
    grid-column: 1
    justify-self: start
    @extend %label-text

    @media (min-width: $mobile)
      justify-self: end

  input, select, textarea
    grid-column: 1

    @media (min-width: $mobile)
      grid-column: 2

.form-group-stacked
  @extend %form-stacked

.form-group-horizontal
  @extend %form-horizontal

// Button Groups
.button-group
  @extend %flex-wrap
  gap: 0.5rem

button
  @extend %button-primary

  &.secondary
    @extend %button-secondary

  &.danger
    @extend %button-danger

// Tables
table
  width: 100%
  background: color-mix(in oklab, var(--primary) 8%, transparent)
  @extend %glass, %shadow-card
  overflow: hidden
  border-radius: 1rem

  th, td
    padding: 0.75rem 1rem
    text-align: left
    word-wrap: break-word
    overflow-wrap: break-word

    @media (max-width: $mobile)
      padding: 0.5rem 0.75rem
      font-size: 0.8rem

  th
    background: color-mix(in oklab, var(--primary) 15%, transparent)
    @extend %glass
    @extend %font-weight-bold
    font-size: $font
    position: sticky
    top: 0
    z-index: 10
    box-shadow: 0 2px 8px color-mix(in oklab, var(--primary) 25%, transparent)

  tr
    @extend %transition
    &:hover
      background: color-mix(in oklab, var(--secondary) 12%, transparent)
      transform: translateY(-1px)
      box-shadow: 0 4px 16px color-mix(in oklab, var(--secondary) 20%, transparent)

  td button
    @extend %button-small

// Description Lists
dl
  display: grid
  grid-template-columns: 1fr
  gap: 0.5rem

  @media (min-width: $mobile)
    grid-template-columns: 200px 1fr
    gap: 0.5rem 1rem

  dt
    @extend %font-weight-bold
    @extend %text-muted

  dd
    color: var(--fg)
    word-wrap: break-word
    overflow-wrap: break-word

dl.horizontal
  @extend %form-horizontal

// Empty States
div:has(> h4)
  @extend %grid
  place-items: center
  @extend %text-muted
  text-align: center
  gap: 1.5rem
  padding: 5rem 1rem

  svg, .icon
    @extend %opacity-subtle, %transition
  &:hover svg, &:hover .icon
    @extend %hover-opacity, %hover-scale

// Utilities
.mb-0
  margin-bottom: 0

.mt-0
  margin-top: 0

// Text Utilities
.text-muted
  @extend %text-muted

.text-error
  color: var(--error)

.text-success
  color: var(--success)

// Responsive Utilities
.stats-grid
  display: grid
  grid-template-columns: 1fr
  gap: 1rem
  margin-bottom: 2rem

  @media (min-width: $mobile)
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))

.salary-grid
  display: grid
  grid-template-columns: 1fr
  gap: 2rem
  margin: 1.5rem 0

  @media (min-width: $tablet)
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr))

// Animations
@keyframes fadeIn
  from
    opacity: 0
  to
    opacity: 1

@keyframes slideUp
  from
    opacity: 0
    transform: translateY(20px)
  to
    opacity: 1
    transform: translateY(0)

.fade-in
  animation: fadeIn 0.3s ease-in

.slide-up
  animation: slideUp 0.3s ease-out

