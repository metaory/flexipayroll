@use "sass:color"

$gap: 1rem
$padding: 1.5rem
$radius: 1rem
$font: 0.8rem
$spacing: 2rem
$min-height: 2.5rem

$bg-filter-light: blur(8em) brightness(1.1) opacity(0.3)
$bg-filter-dark: blur(8em) brightness(1.0) opacity(0.9)

$mobile: 768px
$tablet: 1024px

$base: #6366f1
$reach: #0d0f51
$dark-bg: hsl(225deg 70% 6% / 70%)
$light-bg: hsl(0deg 0% 100% / 70%)

@function adj($h: 0deg, $s: 0%, $l: 0%)
  $result: color.adjust($base, $hue: $h, $saturation: $s, $lightness: $l)
  $hue: round(color.hue($result))
  $sat: round(color.saturation($result))
  $light: round(color.lightness($result))
  @return hsl($hue, $sat, $light)

@function semantic-color($name, $dark: false)
  $colors: (
    success: (hue: 142deg, sat: 85%, light: if($dark, 35%, 40%)),
    warning: (hue: 38deg, sat: 95%, light: if($dark, 40%, 45%)),
    error: (hue: 0deg, sat: 90%, light: if($dark, 40%, 45%)),
    info: (hue: 217deg, sat: 90%, light: if($dark, 40%, 45%)),
    neutral: (hue: 220deg, sat: 25%, light: if($dark, 40%, 40%))
  )
  $color-data: map-get($colors, $name)
  $hue: round(map-get($color-data, hue))
  $sat: round(map-get($color-data, sat))
  $light: round(map-get($color-data, light))
  @return hsl($hue, $sat, $light)

@mixin generate-colors($dark: false)
  --base: #{$base}
  --brand: #{adj(120deg, 30%, 15%)}
  @if $dark
    $primary: adj(30deg, 30%, 7%)
    $secondary: adj(120deg, 40%, 12%)
    --based: #0d0f51;
    --bg: #{$dark-bg}
    --bg-muted: #{color.mix($dark-bg, transparent, 80%)}
    --fg: #{adj(15deg, 60%, 45%)}
    --fg-muted: #{adj(10deg, 35%, 25%)}
    --primary: #{$primary}
    --secondary: #{$secondary}
    --surface: #{color.mix($primary, transparent, 8%)}
    --surface-secondary: #{color.mix($secondary, transparent, 8%)}
    --border: #{color.mix($primary, transparent, 25%)}
    --border-muted: #{color.mix($primary, transparent, 15%)}
  @else
    $primary: adj(0deg, 25%, 22%)
    $secondary: adj(120deg, 35%, 17%)
    --based: #dedeed;
    --bg: #{$light-bg}
    --bg-muted: #{color.mix($light-bg, transparent, 80%)}
    --fg: #{adj(0deg, -30%, -35%)}
    --fg-muted: #{adj(0deg, -50%, -15%)}
    --primary: #{$primary}
    --secondary: #{$secondary}
    --surface: #{color.mix($primary, transparent, 8%)}
    --surface-secondary: #{color.mix($secondary, transparent, 8%)}
    --border: #{color.mix($primary, transparent, 25%)}
    --border-muted: #{color.mix($primary, transparent, 15%)}

  @each $name in success, warning, error, info, neutral
    $semantic: semantic-color($name, $dark)
    --#{$name}: #{$semantic}
    --surface-#{$name}: #{color.mix($semantic, transparent, 12%)}
    --on-#{$name}: #{if($dark, black, white)}
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1)
    --radius: #{$radius}


:root
  @include generate-colors(false)

@mixin generate-bitgrid-colors($dark: false)
  --grid-primary: var(--brand)
  --grid-bg: var(--bg)
  --grid-cell-bg: var(--based)
  --grid-text: var(--fg)
  --grid-text-muted: var(--fg-muted)
  --grid-header-bg: var(--bg-muted)
  --grid-hover-bg: var(--secondary)
  --grid-selection-bg: var(--primary)
  --grid-selection-active-bg: var(--primary)
  --grid-cell-size: 28px
  --grid-header-width: 80px
  --grid-cell-spacing: 4px
  --grid-cell-radius: 8px
  --grid-radius: 12px

bit-grid
  @include generate-bitgrid-colors(false)

html.dark
  @include generate-colors(true)
  
  bit-grid
    @include generate-bitgrid-colors(true)

*
  box-sizing: border-box
  margin: 0
  padding: 0

button, input, select, textarea, fieldset, legend, optgroup, option
  border: none
  outline: none
  background: none
  font-family: inherit
  font-size: inherit
  color: inherit

button
  cursor: pointer
  padding: 0
  margin: 0
  border-radius: 0
  background: transparent
  border: none
  font: inherit
  color: inherit
  text-decoration: none
  display: inline-block
  line-height: 1
  text-align: center
  vertical-align: middle
  user-select: none
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

input, select, textarea
  border: none
  outline: none
  background: transparent
  font: inherit
  color: inherit
  padding: 0
  margin: 0
  border-radius: 0
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

select
  background-image: none
  -webkit-appearance: none
  -moz-appearance: none
  appearance: none

fieldset
  border: none
  padding: 0
  margin: 0
  min-width: 0

legend
  border: none
  padding: 0
  margin: 0

ul, ol
  list-style: none
  padding: 0
  margin: 0

a
  color: inherit
  text-decoration: none

table
  border-collapse: collapse
  border-spacing: 0

img
  max-width: 100%
  height: auto
  border: none
  vertical-align: middle

html, body
  overflow: hidden
  max-width: 100vw
  height: 100vh

body
  font-family: 'Baloo 2', sans-serif
  line-height: 1.6
  background: var(--based)
  color: var(--fg)
  height: 100vh
  max-width: 1200px
  margin: 0 auto
  padding: 0
  overflow: hidden
  display: grid
  grid-template-rows: 5rem calc(100vh - 9rem) 4rem
  grid-template-areas: "header" "content" "footer"

  @media (max-width: $mobile)
    grid-template-rows: 4rem calc(100vh - 7rem) 3rem

%flex
  display: flex
  align-items: center

%flex-between
  @extend %flex
  justify-content: space-between

%flex-wrap
  @extend %flex
  flex-wrap: wrap
  gap: $gap

%grid
  display: grid
  gap: $gap

%transition
  transition: all 0.2s ease

%glass
  backdrop-filter: blur(10px)

%focus
  &:focus
    outline: none
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 40%, transparent), 0 4px 20px color-mix(in oklab, var(--primary) 30%, transparent)

%button-base
  display: inline-flex
  align-items: center
  gap: 0.5rem
  padding: 0.75rem 1rem
  border-radius: var(--radius)
  font-size: $font
  font-weight: 500
  cursor: pointer
  @extend %transition
  min-height: $min-height
  white-space: nowrap
  border: none

  &:disabled
    opacity: 0.5
    cursor: not-allowed

%button-primary
  @extend %button-base
  background: var(--primary)
  color: white

  &:hover:not(:disabled)
    background: color-mix(in oklab, var(--primary) 90%, black)

%button-secondary
  @extend %button-base
  background: var(--secondary)
  color: white

  &:hover:not(:disabled)
    background: color-mix(in oklab, var(--secondary) 90%, black)

%button-outline
  @extend %button-base
  background: var(--surface)
  color: var(--fg)
  border: 4px solid var(--border-muted)

  &:hover:not(:disabled)
    background: var(--bg-muted)

%button-danger
  @extend %button-base
  background: var(--error)
  color: white

  &:hover:not(:disabled)
    background: color-mix(in oklab, var(--error) 90%, black)

%input-base
  padding: 0.75rem
  border: 6px solid var(--border-muted)
  border-radius: var(--radius)
  background: var(--surface)
  color: var(--fg)
  font-size: $font
  min-height: $min-height
  @extend %transition

  &:focus
    outline: none
    border-color: var(--primary)
    background: var(--bg-muted)

  &::placeholder
    color: var(--fg-muted)
    opacity: 0.7

%card-base
  background: var(--surface)
  padding: 2rem
  border-radius: 1rem

%table-base
  width: 100%
  background: var(--surface)
  border-radius: 1rem
  overflow: hidden
  border: 4px solid var(--border-muted)

  th, td
    padding: 0.75rem 1rem
    text-align: left
    border-bottom: 4px solid var(--border-muted)

  th
    background: var(--bg-muted)
    font-weight: 600
    color: var(--fg)

  tr:hover
    background: var(--bg-muted)

h1, h2, h3, h4, h5, h6
  font-family: 'Bungee', monospace
  line-height: 1.2
  font-weight: 600

h1
  font-size: 2rem
  color: var(--primary)

  @media (max-width: $mobile)
    font-size: 1.5rem

h2
  font-size: 1.5rem
  color: var(--primary)
  margin-bottom: 1rem

  @media (max-width: $mobile)
    font-size: 1.25rem

h3
  font-size: 1.25rem
  color: var(--primary)
  margin-bottom: 1rem

  @media (max-width: $mobile)
    font-size: 1.1rem

h4
  font-size: 1rem
  color: var(--fg)
  margin: 1rem 0 0.5rem

p
  color: var(--fg-muted)
  margin-bottom: 1rem

.text-muted
  color: var(--fg-muted)

.text-primary
  color: var(--primary)

.text-secondary
  color: var(--secondary)

.text-error
  color: var(--error)

.text-success
  color: var(--success)

.text-warning
  color: var(--warning)

.mb-0
  margin-bottom: 0

.mt-0
  margin-top: 0

::-webkit-scrollbar
  width: 8px
  height: 8px

::-webkit-scrollbar-track
  background: var(--bg-muted)
  border-radius: 4px

::-webkit-scrollbar-thumb
  background: var(--border)
  border-radius: 4px
  transition: background 0.2s ease

  &:hover
    background: var(--primary)

*
  scrollbar-width: thin
  scrollbar-color: var(--border) var(--bg-muted)